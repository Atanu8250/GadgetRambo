import Head from "next/head";
import React from "react";
import styles from "@/styles/Home.module.css";
import { cssVar, Text } from "@chakra-ui/react";
import NewsCard from "@/components/newsCard";
import { useDispatch, useSelector } from "react-redux";
import { useEffect } from "react";
import { getNews } from "@/redux/news/news.actions";
import { State } from "../redux/store";

export default function Home() {
  const { news } = useSelector((store: State) => store.newsManager);
  const dispatch = useDispatch();
  useEffect(() => {
    // if (news.length === 0) {
    getNews(dispatch, 15);
    // }
  }, []);

  return (
    <>
      <Head>
        <title>GadgetRambo</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
      </Head>
      <main className={styles.main}>
        <div className={styles.left_sideBar}>
          <Text
            color={"var(--color-primary)"}
            fontSize={"18px"}
            fontWeight={"500"}
          >
            TRENDING
          </Text>
          {news.map((el: any, index: number) => {
            if (index > 10) {
              return;
            }
            return (
              <NewsCard
                key={el.id}
                title={el.title}
                titleSize={"13px"}
                banner={el.banner}
                width={"100%"}
                height={"100px"}
              />
            );
          })}
        </div>
        <div className={styles.mainContainer}>
          <div className={styles.inDepthBox}>
            <div style={{display:"flex",gap:"1rem"}}>
              {news.map((el: any, index: number) => {
                if (index > 4) {
                  return;
                }
                return (
                  <NewsCard
                    cardWidth="25%"
                    key={el.id}
                    title={el.title}
                    titleSize={"15px"}
                    banner={el.banner}
                    width={"100%"}
                    height={"120px"}
                  />
                );
              })}
            </div>
          </div>
        </div>
      </main>
    </>
  );
}
